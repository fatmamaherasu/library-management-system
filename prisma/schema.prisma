generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                String          @id @default(uuid())
  email             String          @unique @db.VarChar(255)
  password          String          @db.VarChar(255)
  phone             String?         @db.VarChar(255)
  name              String          @db.VarChar(255)
  isAdmin           Boolean         @default(false)
  createdAt         DateTime        @default(now())
  updatedAt         DateTime        @default(now()) @updatedAt
  booksBorrowed     Checkout[]

  @@map("users")
}

model Book {
  id                 Int               @id @default(autoincrement())
  title              String
  author             String
  ISBN               String
  quantity           Int
  location           String
  createdAt          DateTime?         @default(now())
  updatedAt          DateTime?         @updatedAt    
  timesBorrowed      Checkout[]

  @@map("books")
}

model Checkout {
  id                  Int               @id @default(autoincrement())
  bookId              Int
  userId              String
  returned            Boolean           @default(false)
  checked             Boolean           @default(false)
  borrowedAt          DateTime?         @default(now())
  returnedAt          DateTime?
  checkedAt           DateTime?
  dueDate             DateTime?
  overdue             Boolean           @default(false)
  book                Book        @relation(fields: [bookId], references: [id])
  user                User        @relation(fields: [userId], references: [id])

  //@@unique([userId, bookId])
  @@map("checkouts")
}